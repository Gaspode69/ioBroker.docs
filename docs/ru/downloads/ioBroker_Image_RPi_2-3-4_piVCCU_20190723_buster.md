---
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translatedFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/downloads/ioBroker_Image_RPi_2-3-4_piVCCU_20190723_buster.md
title: Образ ioBroker для Raspberry Pi2/3/4 Buster с piVCCU 20190723
hash: bAiIDJaL1shG5hKWxJ3vygK36KnYlH8AkJknrjZOofs=
---
# Образ ioBroker для Raspberry Pi2/3/4 Buster с piVCCU 20190723
## Создание карты µ-SD
Это универсальный образ SD-карты для Homematic с ioBroker на Raspberry Pi2, Pi3, Pi3 B+ или Pi4.

Образ был создан на Raspberry Pi4 с 2 ГБ ОЗУ, но он также должен работать на всех вышеперечисленных устройствах. Он подходит для карт объемом 4 ГБ и больше. Однако рекомендуемый минимальный размер — 8 ГБ. В любом случае рекомендуются карты на 16 ГБ, чтобы не всегда записывались одни и те же ячейки.

Образ распаковывается, а затем записывается на SD-карту с помощью программы Balena Etcher. Etcher доступен для разных операционных систем.

## Компоненты изображения
Образ содержит Raspbian lite, основанный на Debian 10 «Buster» от 10.07.2019 после загрузки с http://www.raspberrypi.org/downloads.

Кроме того, были установлены пакеты, необходимые для некоторых адаптеров.

Также включен piVCCU3 от 19.07.2019 после загрузки с https://www.pivccu.de/images/?dir=piVCCU3.

Создается следующий пользователь:

* Пользователи: `пи`,
* Пароль: `малина`

Node-js установлен в версии 10.16.0 и естественно iobroker через установщик с js-контроллером по состоянию на 23.07.2019.

Это **минимальная установка**, которая **содержит только администратора и адаптер обнаружения**. другие адаптеры и их экземпляры все еще должны быть созданы и настроены.

Создание дополнительных адаптеров и их экземпляров описано в [здесь](/tutorial/adapter.md).

**Примечание!** Следующие инструкции были созданы, насколько нам известно, с использованием информации, доступной на момент создания образа. Что-то может измениться в любой момент из-за обновлений пакетов или ядра.

Изображение локализовано для Германии. Если используется в других средах, отрегулируйте соответствующим образом. (`sudo raspi-config`; 4.) `Localisation Options`)

## После первого запуска
После первого запуска Rapberry Pi выполните следующие настройки с помощью `sudo raspi-config`:

Пункт 1: `Change User passwort` (назначьте собственный пароль для пользователя `Pi`) Пункт 2: `Network Options – Hostname` (при необходимости измените имя Raspberry Pi. По умолчанию — `ioBroker-Pi`) если имя хоста изменилось, то введите `iobroker host this` в консоли в каталоге установки, пункт 7: `Advanced Options – Expand filesystem` (расширение корневой файловой системы до максимального размера используемой SD-карты) при необходимости под пунктом 4: §§SSSSS_6§ § Внесите коррективы. Настройки по умолчанию применяются к Германии.

## Системное обновление
Поскольку с момента создания образа на момент загрузки могло пройти некоторое время, первое, что вам следует сделать, это обновить систему.

Чтобы обновить Linux и nodejs до последних версий, выполните следующие действия в консоли:

```sudo apt-get update && sudo apt-get upgrade -y```

Также следует проверить, есть ли уже обновления для установленных адаптеров и js-контроллера (см. вкладку Hosts).

Помимо минимально возможного размера образа, это также является причиной того, что уже предустановлено лишь несколько адаптеров.

В таких случаях всегда сначала запускайте js-контроллер через консоль по инструкции на вкладке Hosts, затем, если необходимо, Adapter Admin и затем все остальные адаптеры.

## Установка Redis
Эти образы больше не содержат базу данных Redis для хранения состояний. При слабых компьютерах и малом объеме оперативной памяти использование Redis увеличивает производительность, иногда значительно. С более быстрыми компьютерами это уменьшает доступ для записи и, таким образом, продлевает срок службы SD-карты.

Если Redis должен быть установлен, вы должны действовать следующим образом с текущими изображениями.

### Установка сервера Redis
После команды:

`sudo apt install redis-server`

Готов ли сервер Redis и доступен ли порт 6379?

### Изменение состояний на Redis
Использование Redis для хранения состояний в ioBroker должно быть настроено в консоли с помощью:

`iobroker setup custom`

В следующем диалоговом окне введите следующее (внимание в 4-й строке):

```
Type of objects DB [file, couch, redis], default [file]: ENTER
Host of objects DB(file), default[127.0.0.1]: ENTER
Port of objects DB(file), default[9001]: ENTER
Type of states DB [file, redis], default [file]: r ENTER
Host of states DB (file), default[HostName]:ENTER
Port of states DB (file), default[9000]: ENTER
Host name of this machine [hostname]: ENTER
```

Особенности установки в многохостовой системе описаны здесь:

[кликните сюда](config/multihost.md)

Выпуск redis для пользователя iobroker Например, чтобы адаптер резервного копирования также мог получить доступ к redis, пользователю необходимо дать необходимые права с:

`sudo usermod -a -G redis iobroker`

## Установленный piVCCU3
В этот образ также установлен виртуализированный CCU3, что позволяет управлять устройствами Homematic и HM-IP без дополнительного отдельного оборудования.
Только радиомодуль HM-MOD-RPI-PCB или RPI-RF-MOD должен быть подключен к штыревой планке Raspberry Pi.

piVCCU получает от DHCP-сервера IP-адрес, отличный от самого RaspberryPi. Это достигается с помощью команды `sudo pivccu-info`

Если вы вызываете этот IP-адрес, вы можете войти в интерфейс CCU3.
