---
title: Публиковать
lastChanged: 21.01.2020
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/dev/adapterpublish.md
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translatedFrom», в противном случае этот документ будет снова автоматически переведен
hash: YpNSzRL3HYx2hWdzZmSbfQwlt4jfy74+sB2elXA8sTU=
---
# Опубликовать адаптер
Прежде чем подумать о публикации адаптера, его следует предложить для тестирования в [Тема тестирования форума](https://forum.iobroker.net/category/91/tester).
Если тесты прошли успешно и адаптер работает стабильно, его следует на время включить в последний репозиторий.

Если адаптер стабильно работает на определенной версии, вы можете перенести его в стабильный репозиторий. Это требует собственной оценки разработчика в сочетании с отзывами пользователей.

*** См. другие текущие требования здесь: *** https://github.com/ioBroker/ioBroker.repositories/blob/master/README.md

## Требования к последнему репозиторию
0. Используйте [https://adapter-check.iobroker.in/](https://adapter-check.iobroker.in/) для тестирования репозитория адаптера.

1. Репозиторий GitHub адаптера должен иметь заглавную букву B в ioBroker, а в package.json она должна быть строчной, потому что ``npm`` не допускает использование прописных букв.

2. Заголовок в io-package.json не должен содержать слово «ioBroker» или слово «Adapter».

3. Атрибут title в io-package.json (общий) — это краткое имя адаптера на английском языке. В то время как ``titleLang`` содержит переводы атрибута ``title``. (расширение Lang означает языки)

4. Адаптер должен включать инструкции в виде файла README.md. Это должно быть доступно по крайней мере на английском языке. Другие языки также приветствуются. Этот [пример](https://github.com/foxriver76/ioBroker.denon) может служить в качестве предложения.

5. Адаптер требует лицензии. Как в io-package.json, так и в отдельном [файле](https://github.com/foxriver76/ioBroker.denon/blob/master/LICENSE) в репозитории Github.

   Пример io-package.json:

```json
{
  "common": {
      "license": "MIT"
  }
}
```

6. Каталог `www` и каталог `widget` следует удалить, если они не используются.

7. В io-package.json атрибут type должен быть создан под общим. Для этого необходимо указать наиболее подходящую категорию из этого [списка](#adapter categorys).

8. В io-package.json атрибуты `connectionType` и `dataSource` должны быть созданы под общими. Для этого из этого [списка](#adapter connection type) необходимо указать наиболее подходящую категорию подключения.

9. Состояния, созданные адаптером, должны иметь действительные спецификации для своей «роли» в общих файлах .

Следует избегать использования роли `state`.

10. Адаптер должен использовать оба теста, указанные в шаблоне. Для этого можно привязать учетную запись Github к Appveyor (тесты Windows) и Travis CI (тесты Linux и Mac OS) и зарегистрировать соответствующий репозиторий для тестирования.

Эти два инструмента непрерывной интеграции оказались подходящими для проекта ioBroker и бесплатными для общедоступных репозиториев Github.

Объем теста может быть расширен разработчиком.

11. В io-package.json хотя бы одна запись должна быть сделана под общим для атрибута `authors`.

Также необходимо заполнить атрибут `author` в package.json.
При желании несколько авторов также могут быть сохранены для npm с помощью атрибута `contributors` в package.json.

12. Адаптер должен быть доступен в виде пакета npm. Дополнительную информацию можно найти [здесь](https://github.com/ioBroker/ioBroker.repositories#how-to-publish-on-npm).

13. Необходимо добавить организацию ioBroker в npm. Это необходимо для обеспечения долгосрочного обслуживания пакета, даже если разработчик больше не может поддерживать пакет из-за времени или по другим причинам.

Дополнительную информацию можно найти в [здесь](https://github.com/ioBroker/ioBroker.repositories#add-owner-to-packet).

## Требования к стабильному репозиторию
1. Адаптер успешно добавлен в последний репозиторий.
2. Существует [Тестовая ветка форума](https://forum.iobroker.net/viewforum.php?f=36) для адаптера, в котором уже были даны отзывы пользователей.
3. Должна быть реализована функция обнаружения. Это функция [Адаптера обнаружения] (https://github.com/ioBroker/ioBroker.discovery),

для автоматического определения того, может ли пользователь использовать экземпляр адаптера.
Для этого необходимо отправить запрос на извлечение в репозиторий [Адаптеры обнаружения](https://github.com/ioBroker/ioBroker.discovery).

## Добавление адаптера в официальный репозиторий
1. Необходимо посетить [официальный репозиторий Github] (https://github.com/ioBroker/ioBroker.repositories) и сделать запрос на включение со следующим содержимым, в зависимости от репозитория.

2. Расположите адаптер в правильном алфавитном порядке между существующими адаптерами.

3. При включении в стабильный репозиторий необходимо указать номер версии. Это должно быть обновлено при дальнейшей разработке адаптера.

4. Адаптер должен установить атрибут списка `docs` в io-package.json, указывающий, где найти инструкции на соответствующем языке.

В качестве ключа указывается язык, а в качестве значения — путь к файлу уценки.
Руководство на английском языке обязательно (в экстренных случаях можно обратиться к стандартному README). Также желательна инструкция на немецком языке, так как большинство пользователей говорит по-немецки, но это необязательно.
Подробные инструкции могут сэкономить разработчику много времени на форуме.
Пример можно найти в [здесь](https://github.com/foxriver76/ioBroker.denon/blob/master/docs/de/README.md).

   Пример:

```json
{
  "common": {
     "docs": {
         "de": "docs/de/README.md"
     }
  }
}
```

### Последний
Файл `sources-dist.json` необходимо отредактировать:

Пример:

```json
  "admin": {
    "meta": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/io-package.json",
    "icon": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/admin/admin.png",
    "published": "2017-04-10T17:10:21.690Z",
    "type": "general"
  }
```

Дата `published` представляет собой дату первой публикации и не должна изменяться.

### Стабильный
Файл `sources-dist-stable.json` необходимо отредактировать:

Пример:

```json
  "admin": {
    "meta": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/io-package.json",
    "icon": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/admin/admin.png",
    "version": "2.0.7",
    "published": "2017-04-10T17:10:21.690Z",
    "type": "general"
  }
```

Дата `published` представляет собой дату первой публикации и не должна изменяться.

## Управление версиями адаптера
Текущий номер версии адаптера указан как в io-package.json, так и в package.json.
Две детали должны совпадать. Номер версии разделен на три части двумя точками.

```json
"version": "1.7.6"
```

Первая часть (слева направо) представляет собой `Major Part`, вторая часть — `minor`, а последняя часть — `micro`.
Номера версий должны увеличиваться в соответствии со следующим списком:

- **микро**: исправлены только ошибки
- **minor**: добавлены функции, однако версия совместима с предыдущими версиями.
- **основные**: основные изменения, которые означают, что обратная совместимость со старой версией больше не предоставляется.

Атрибут `news` также должен поддерживаться в io-package.json.
Это позволяет пользователям устанавливать любую указанную версию (при условии, что она была опубликована в npm) из интерфейса администратора.
Номер версии и изменения должны храниться здесь.
Изменения могут быть задокументированы для каждого поддерживаемого языка, при этом они должны быть указаны как минимум на английском языке.

Пример:

```json
"news": {
    "1.7.6": {
        "en": "Configuration dialog was corrected",
        "de": "Konfigurationsdialog wurde korrigiert",
        "ru": "Диалог конфигурации был исправлен",
        "pt": "A caixa de diálogo de configuração foi corrigida",
        "nl": "Configuratiedialoog is gecorrigeerd",
        "fr": "La boîte de dialogue de configuration a été corrigée",
        "it": "La finestra di configurazione è stata corretta",
        "es": "Se corrigió el diálogo de configuración",
        "pl": "Okno dialogowe konfiguracji zostało poprawione"
    },
    "1.7.5": {
        "en": "The roles were tuned",
        "de": "Die Rollen waren abgestimmt",
        "ru": "Роли были настроены",
        "pt": "Os papéis foram afinados",
        "nl": "De rollen zijn afgestemd",
        "fr": "Les rôles ont été réglés",
        "it": "I ruoli erano sintonizzati",
        "es": "Los roles fueron sintonizados",
        "pl": "Role zostały dostrojone"
    }
}
```

## Категории адаптера
- `сигнализация` - системы безопасности
- `климат-контроль` - кондиционеры, воздушные фильтры, обогреватели и многое другое
- `связь` - предоставление данных для других адаптеров, т.е. Б. через ОТДЫХ
- `дата-и-время` - напр. Б. Календарь
- `энергия` - мониторинг тока, солнечные системы, инверторы и многое другое.
- "измерительные" - другие измерительные системы (например, вода, газ, нефть)
- `сад` - напр. B. газонокосилки, спринклерные системы
- `general` – общие адаптеры, такие как Admin, Web, Discovery.
- `геопозиция` - Геолокация объектов или людей
- «аппаратное обеспечение» - различные многофункциональные аппаратные средства, такие как Arduino, ESP, Bluetooth, ...
- `здоровье` - кровяное давление, частота сердечных сокращений, масса тела, ...
- `бытовые` - кухонная техника, пылесосы и т.д.
- `инфраструктура` - сеть, NAS, принтеры, телефоны
- `iot-systems` - Другие системы умного дома (аппаратное и программное обеспечение)
- `lighting` - освещение
- `логика` - правила, скрипты, парсеры и т.д.
- `messaging` - адаптер для отправки и получения сообщений, т.е. Например, по электронной почте, телеграмме, ...
- `misc-data` - экспорт и импорт данных, конвертер валют и т.д.
- `мультимедиа` - TV, AVR, боксы, голосовые помощники и т.д.
- `сеть` - пинг, сетевое обнаружение, UPnP, ...
- "протоколы" - протоколы связи, т.е. B.MQTT
- `хранилище` - регистрация, управление данными, т.е. B. реляционные базы данных, ...
- `утилита` - Поддержка таких адаптеров, как Б. Резервное копирование
- `транспортное средство` - автомобили
- `Visualization` - адаптеры визуализации, такие как vis и т.д.
- `visualization-icons` - Иконки для визуализаций
- `визуализация-виджеты` - iobroker.vis Widgets
- `weather` - информация о погоде, качестве воздуха, информация об окружающей среде

## Тип подключения адаптера
Определите `connectionType` в части `common` `io-package.json` следующим образом:

- `local` — обеспечивает прямую связь с устройством или концентратором.
- «облако» — это устройство интегрируется через облако и требует активного подключения к Интернету.

Определите `dataSource` в `common` следующим образом:

- `poll` - Опрос статуса означает, что обновление может быть замечено позже.
- `push` - ioBroker будет уведомлен, как только станет доступен новый статус.
- `предположение` - невозможно определить состояние устройства. ioBroker получает статус на основе последней команды ioBroker.
