---
title: ioBroker больше не работает
lastChanged: 06.06.2019
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translatedFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/trouble/RunsNoMore.md
hash: +IimqxVNeVMpPXhNnAWhm8X76aM2a2RJemrZvve2pNs=
---
# IoBroker больше не работает
На форуме часто всплывает информация о том, что ioBroker больше не работает. Но это утверждение несет столько же информации, сколько: моя машина не едет.

Вы же не думаете, что может быть 1000 причин, по которым машина не едет: нет топлива, разряженный аккумулятор, спущенные шины и, и, и...

ioBroker очень модульный, и вы можете легко исправить каждую часть. Файлы конфигурации вынесены из каталога с пакетами Node.js, и пока этот каталог конфигурации не поврежден, с установкой ioBroker ничего серьезного не произошло.

Первое, что вы заметите, это то, что ioBroker не запускается, если не запущен «admin». Но есть более-менее понятный алгоритм, как проверить, что сломалось.
Проверяем, запущен ли js-контроллер:

**Линукс:**

````
Linux: ps -A | grep iobroker
````

**Windows:**

Проверьте, есть ли процесс node.exe в Process Explorer (показать все процессы)

Под linux должно быть видно что-то вроде этого:

```
pi@pi:~$ ps -A | grep iobroker
1807 ? 13:59:22 iobroker.js-con
```

Если он не запущен, попробуйте запустить ioBroker с

**Линукс:**

```
cd /opt/iobroker
iobroker start
```

или **Windows:**

```
cd C:\ioBroker
iobroker start
```

Если он по-прежнему не работает или появляются сообщения об ошибках, вы можете попробовать запустить js-контроллер вручную.

```
cd /opt/iobroker
node node_modules/iobroker.js-controller/controller.js --logs
```

Если появляются сообщения об ошибках, вы можете попробовать обновить «js-controller».

Если js-контроллер запущен, TCP-порты 9000 и 9001 должны быть заняты. Это можно проверить командой:

```
netstat -n -a -p TCP
```

Должны быть видны следующие строки:

```
TCP 0.0.0.0:9000 0.0.0.0:0 LISTENING
TCP 0.0.0.0:9001 0.0.0.0:0 LISTENING
```

При использовании Redis это должно выглядеть так:

```
TCP 0.0.0.0:6379 0.0.0.0:0 LISTENING
TCP 0.0.0.0:9001 0.0.0.0:0 LISTENING
```

Если ничего не видно (или только одно), то вероятно порты заняты другими программами. Вы можете изменить порты в */opt/iobroker/iobroker-data/iobroker.json*. Или перенастроить другую программу.

## Переустановите адаптер или js-контроллер
Если адаптер или js-контроллер был запущен, а не после обновления, то, скорее всего, что-то пошло не так с обновлением. Но вы можете легко установить адаптер снова. Все, что вам нужно сделать, это написать в консоли:

```
cd /opt/iobroker
iobroker stop adapterName
npm install iobroker.adapterName
iobroker upload adapterName
iobroker start adapterName
```

Или для js-контроллера:

```
cd /opt/iobroker
iobroker stop
npm install iobroker.js-controller
iobroker start
```

## Проверьте правильность установки node.js и npm
Если js-controller не запущен, возможно, node.js вообще не установлен.
Рекомендуется использовать версию node.js 14.x.

Версия Node.js 16.x была протестирована, насколько это возможно (по состоянию на 5 мая 2022 г.), с версией 18.x нет гарантии, что она будет работать.

Команды

```
node -v
npm -v
```

должен показывать тот же номер версии. Если это не так, вам следует удалить и переустановить node.js. Или проверьте путь поиска.

Удаление и установка Node.js аналогичны ручной установке ioBroker (на Raspberry и других системах Linux).

Необходимые шаги подробно описаны ЗДЕСЬ.

А здесь вы можете найти информацию о других системах.
Проверьте, работает ли адаптер администратора.

Сначала проверьте, активирован ли администратор:

```
cd /opt/iobroker
iobroker list instances
```

вы должны увидеть такую строку:

```
system.adapter.admin.0 : admin - enabled, port: 8081, bind: 0.0.0.0, run as: admin
```

Если вместо «включено» указано «отключено», вы можете включить адаптеры следующим образом:

```
iobroker start admin
```

Если IP-адрес неверный, то напишите:

```
iobroker set admin.0 --bind 0.0.0.0
```

разрешить на всех IP-адресах.

Вы также можете изменить порт:

```
iobroker set admin.0 --port 8081
```

или отключить SSL:

```
iobroker set admin.0 --secure false
```

Затем экземпляр должен быть виден на порту (по умолчанию 8081).

С

```
netstat -n -a -p TCP
```

вы можете проверить, можно ли найти строку:

```
TCP 0.0.0.0:8081 0.0.0.0:0 LISTENING
```

Если он все еще не запущен, вы можете запустить его вручную и посмотреть, есть ли ошибки: cd /opt/iobroker node node_modules/iobroker.admin/admin.js --logs

Это также может быть что-то в журнале. Файл журнала можно найти по адресу ***/opt/iobroker/log/iobroker.ГГГГ-ММ-ДД.log***.

Вы можете с помощью команды

```
cd /opt/iobroker
cat log/iobroker.JJJJ-MM-TT.log
```

просмотреть файл. Конечно, ГГГГ-ММ-ДД нужно заменить на текущую дату. («кошка» возможна только под Linux)

## Установить другой экземпляр от администратора
Если настройки консоли администратора были изменены и вы больше не можете получить доступ к странице администратора, по-прежнему есть возможность установить второй экземпляр администратора.

Поэтому:

```
iobroker add admin --port 8089
```

Бежать.

Здесь 8089 — порт, который заведомо свободен. Затем вы можете связаться с администратором по адресу http://ip:8089.

После того, как настройки снова будут правильными, вы должны удалить новый экземпляр (второй на порту 8089) для экономии ресурсов.

## Нпм исчез
>! В настоящее время это происходит с Debian (Raspbian) Buster.

Из-за проблемы с npm может случиться так, что после обновления с Linux, в котором nodejs обычно также обновляется в рамках основной версии (6.x; 8.x, 10.x), вдруг ничего не работает.

Например, адаптеры больше не могут быть установлены, сообщение об ошибке ***npm не найдено***

В случаях проверьте в консоли:

узел -v нпм -v

Обычно сейчас (по состоянию на 30 июля 2019 года) версия узла 8.15.0 и npm не найден.

Обычная процедура обновления npm не работает, потому что npm там нет. Поэтому вам нужно сначала удалить узел, а затем переустановить его:

```
sudo apt-get --purge remove node
sudo apt-get --purge remove nodejs
sudo apt-get autoremove
curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
sudo apt-get install -y nodejs
node -v
npm -v
```

Обычно теперь должен быть установлен npm 6.x.

Если ранее была установлена другая основная версия (не 10.x) Node, пакеты на узле 10 все равно необходимо скомпилировать.

```
cd /opt/iobroker
npm rebuild
```
